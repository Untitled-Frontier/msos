//const generator = require('./helpers/merkle_generator.js');

// UG merkle root: 0x7cc8028ca29b9825ff9247ea9ae162aefe188b90b2f671ff19850eb54e9d45df

async function main() {

    const C = await ethers.getContractFactory("Collection");
    const start ='1664805600'; // 3 Oct 14:00 GMT
    const end = '1667224800'; // 31 Oct 14:00 GMT
    const split = '0xF4fA7e95d8F115208841e97794a007997645f7C7'; // mainnet 0xsplit
    // name, symbol, recipient, startDate, endDate, merkle root
    const root = "0x7cc8028ca29b9825ff9247ea9ae162aefe188b90b2f671ff19850eb54e9d45df";
    const c = await C.deploy("Capsules of All Our Lives", "COAOL", split, start, end, root);
    const cd = await c.deployed();
    const cAddress = await c.address;
    console.log("UG deployed to: ", cAddress);

    const rare = [
      'DIVINATED CORALS',
      'PLANTED RUNES',
      'LED EXODUS',
      'CRAFTED IRIDESCENCE',
      'ACCUMULATED DUNES',
      'DECIPHERED CAVES',
      'STOLE GUILT',
      'WROTE SAND',
      'BRAIDED GEMS',
      'TOUCHED LIGHTNING',
      'SPARKED AWAKENING',
      'TORE FEAR',
      'ALIGNED COLLECTIVE',
      'HACKED CONFUSION',
      'STEERED WEBS',
      'GUIDED MOVEMENTS',
      'PROGRESSED PERCEPTION',
      'ABSORBED THOUGHT',
      'CONSTRUCTED EMPIRES',
      'BYPASSED EGOS',
      'RETRIEVED RIDDLES',
      'MET FROGS',
      'TURNED PHYSICS',
      'SLEPT AURAS',
      'FOUND SILLINESS',
      'COOKED SURVEILLANCE',
      'BUILT BIO-ARMOUR',
      'ALLEVIATED COGNITION',
      'INTENSIFIED LUCIDITY',
      'PAINTED INTERBEINGS',
      'DRANK CULTURES',
      'EMERGENT KNOWING',
      'SWEPT SUNSHINE'
  ];

  const normal = [
    'LENGTHENED PLANETS',
    'BREATHED SONIC',
    'BEAMED RHYTHMS',
    'MERGED CONTENTION',
    'DEPLOYED PUZZLES',
    'RECREATED MYTHS',
    'GREW ROOTS',
    'UNDERSTOOD RAIN',
    'REVITALISED ELECTRICITY',
    'THOUGHT CRYSTAL',
    'SURPRISED BEINGS',
    'PLAYED INFINITELY',
    'SNUGGLED DANGER',
    'PINCHED MAGMA',
    'JUGGLED MOMENTS',
    'SPOKE WATER',
    'SCULPTED SOUND',
    'BEGAN BEGINNINGS',
    'BECAME ECOLOGY',
    'TASTED LIGHT',
    'THOUGHT STORMS',
    'CIRCULATED GRAVITY',
    'SWAM COLOURFULLY',
    'GALVANISED BASS',
    'HEARTENED ROCKS',
    'KINDLED EARTHSTORY',
    'AWAKENED GRIMOIRE',
    'INCITED ABUNDANCE',
    'EVOLVED SEEDS',
    'DANCED COSMIC',
    'REGENERATED',
    'FLIRTED FLOWERS',
    'CHERISHED WINTER',
    'TOYED RIVERS',
    'CREATED BEAUTY',
    'EMBOLDENED DUST',
    'LOVED MOSS',
    'DANCED WORLDS',
    'WHISPERED DARKNESS',
    'CODED DIVINITY',
    'LAUGHED DEEPLY',
    'DREAMED FUNGI',
    'VENTURED DEPTHS',
    'WANDERED FORESTS',
    'SCULPTED SUN',
    'SUBVERTED ECLIPSE',
    'EMBODIED MOUNTAIN',
    'EXPLORED DIVINITY',
    'DEEPENED STILLNESS',
    'REFLECTED STARS',
    'UNITED FRIENDS',
    'BEFRIENDED DARKNESS',
    'FELT UNIVERSAL',
    'INITIATED EARTHSTORY',
    'EMBRACED ALL',
    'ROAMED UNIVERSE',
    'NOURISHED DEATH',
    'FLOATED CLOUDS',
    'MOVED EVERYBODY',
    'FELT COSMIC',
    'SHOOK TRAUMA',
    'HEALED PAIN'
  ];
    // 25
    const m1 = ['35711078916739456142970665160238737690456531164202513951819905689927382864837', '0', '26575566407653419276797477600813605343801853233498990633252211420524814443027', '0', '6961795264912840484763982011903811386806250999980339044572541501821826999268', '74000000000000000', '98448926857242371784937661865469889193461723600366489030226273461403690404916', '22000000000000000', '88998019220849440289753188614296471704505541657871498953149287768246862086799', '22000000000000000', '12515489116549078225991250868823169543968416376599331594062459737407689264812', '22000000000000000', '21097378435659537698746716328411321458436103819322188011489353750719216925418', '22000000000000000', '101919191574944404162799214477693839465017393833188728503760982008365407274169', '0', '17311217356431765727141022710701055678440741919896519941568387755992577107685', '22000000000000000', '106997719350227925884435963161182082464741482828563420996626506547842228061870', '22000000000000000', '49571965386904856003662048530017481436897827922764362040538318834473085340282', '0', '24488860861089056634979704157801014648045261425074184271062174443975764822453', '22000000000000000', '7303086594468285571375972991685250475983806275565441232214061658959136817366', '22000000000000000', '22211800067641394359721296369512451708731703280964535880831406250393779261892', '22000000000000000', '94232042787762438397995984029466781450671306242265145145859312162384929425680', '0', '2844211829655901511575475622148224373185997414136623849497713135236053799241', '22000000000000000', '94379235015634409679463249100436165650049141607468786508906475613339112271119', '22000000000000000', '105564083363721114113362375039476176172330655614850318117346577496608686488994', '22000000000000000', '75406886540006787623644632381616116034475277199479477923842963209402609696403', '22000000000000000', '112258091739800663339114244356481611562508964680680818730432095998234344785274', '22000000000000000', '98333820410352066599495282649103685299914295407132025610907215350764642998088', '22000000000000000', '12161624090288706683587053882672499346525392662662440680579502494231494592417', '74000000000000000', '87427362628376083169155245747621178509326960356058251591068767598772502073303', '0', '1818775496152392809819327674858999026061101619539631344845232775785253527268', '22000000000000000', '101396713684156357175620603994440796435002892710173562286747144448494633421228', '22000000000000000'];
    // 50
    const m2 = ['50499472141317243319381740703250817021906759901129848436726950445281172442664', '22000000000000000', '51407799409940738159437625575786164261290894023750001859499991516677396954073', '22000000000000000', '66404835663696386196556613556261041730413624963545190061774710227943452371407', '74000000000000000', '70642431827598363985970378620469376267379990249898245807691905375375032070534', '22000000000000000', '38338874611341397398717913074216335254759983660775868370063733608660091643613', '22000000000000000', '2379558756347764938672702603988669592797661728628425067431988124861734507756', '22000000000000000', '107701168406549082070439143398603412128023911891047772038157380601338807424632', '22000000000000000', '24340052103114751417690470891194527141968416750830432341051581431182329028599', '22000000000000000', '78780779753857311246231512765434751053735928929604920377884134679898931008172', '0', '67717237347907210159862347775382959832250144772359248733881087505527789986682', '0', '115018311217082973784840741805399216960800434652835625227198158837338678437771', '0', '69130079508852194339190744401506340442991978559256489165717950120840613409033', '22000000000000000', '57902706851908511127447324361954872789114257525082265643329864336629143984009', '22000000000000000', '59777335478205861242839118912216265407233790864259465402729712046978663427770', '22000000000000000', '114451326239573752108826136247889609779217728108172259159542045778222134610085', '22000000000000000', '99975443825458362083107491013926933085464952258398468508996003364028674122342', '22000000000000000', '38888646049803502938748664236454341581616822652270181179587596755019499471788', '22000000000000000', '85293464233927495197656781437481635247671611492451686912368335523522189953779', '22000000000000000', '112844011874147811820819329526231715727775600654302665358389545567033918236707', '22000000000000000', '97785767348122424436453737874809174348169572546116895452147076343338961031182', '22000000000000000', '54360695689867968461740771039146133216025659257599665010074626376344415081200', '22000000000000000', '30663969902978839825964674892166046992669797923079119412677622733854568873547', '22000000000000000', '105866886471342609233364313582391679584743979008536638269877720311216665808533', '22000000000000000', '36671998876033061367096219097756031027540797057691117108688505258260872778276', '22000000000000000', '102181401700328533625618155765681530636972752776870507866482256487088863108647', '22000000000000000'];
    // 75
    const m3 = ['39849901937204761540375367218549580778316340757294783476416473041987036152912', '22000000000000000', '65327817450789646978623047387352615603181665727031693353322669944145376917225', '22000000000000000', '111938256503363867828041823101545631891631596693320714032269804449546336156571', '22000000000000000', '20801205205626756074979420499029313920064694070697031824118949486776206438198', '22000000000000000', '33664817374547072219370548790560135539913942207176401542457672199037025425655', '22000000000000000', '48112414434633018682839094652097834347096271573483419985407720512308498870487', '22000000000000000', '29598310397752071233984143823608606738141665636973941344773850407203678783000', '0', '83155321707327104372779657397782701376639079244070536691579809276781738841457', '22000000000000000', '44836420047784633932055543160294690505420382081821098206612249641136113514254', '22000000000000000', '52857252024505082689737283458587422462303021444219471140281724791743595441144', '22000000000000000', '12246367350053775366224163286254317285184133183383862491273187280551583394714', '22000000000000000', '32892376633605362987156211018373745969770879170908034150688751144706616058980', '22000000000000000', '4186479911969610431731361280410201532252149887637087891716828357280682548460', '22000000000000000', '74539474190972441556861208657469504068140331947339043760552538588938376638972', '22000000000000000', '437832444747394174783264219144350369785674724705703860692115831323873836426', '22000000000000000', '27448707562527963856887355031957892798336067438937972369772211245205313646229', '22000000000000000', '22861161827011979361204843140037496698130950472784706862317689810660150858913', '22000000000000000', '6477654724574653302379063155733107591827719794318064521648633992257342874467', '22000000000000000', '90347309848551025581527067702778090432026773085074847481000064806614687435100', '22000000000000000', '31034414248495350259935909938348289885767713288248958723486987913095766967184', '74000000000000000', '91088168041902837229783615000310763852143189640694108559923056738323689157797', '74000000000000000', '18794355603737928568761766373208800467251703949905582081649448573093452806723', '22000000000000000', '102868918703000770791895239501063660095551211099909963067114959196677562806295', '22000000000000000', '95362170599291178954250582786577433540575774310033695252566675983440083563915', '22000000000000000', '109148810008065224647840966045930923522378912610516398484496501030256748528743', '74000000000000000'];
    // 91
    const m4 = ['95950061343389642012380971124434713402871533522531018496075135657463826864094', '74000000000000000', '91939009600045965694529844058422305719229155555087677251238770063803709156596', '22000000000000000', '64723472048755016477721996194802110338607493627422427675084221817728935614552', '22000000000000000', '77804539806802614174930375793938093975730757709036287044122628038936755407044', '22000000000000000', '59574019091802027297852511151091416309370109768650409772535731179360956284971', '22000000000000000', '16604678335259482660916370882705252226280390977249347388661918403229574055033', '0', '49453200053651184386918973880369663268343863884187839159186775980416377061885', '22000000000000000', '64151346649661572997059027236076618926734242013484443242840734236954309415608', '22000000000000000', '6073483222691261782582406417346839764908274646540907876991699282520003929620', '74000000000000000', '74143047468981320514580107562982573738204022873281942543305517810919721587619', '22000000000000000', '20255495695644049979864970096393832268748682846176611411829338668767960574645', '74000000000000000', '15877986021605458694650072149448240725841002936894758967585248426582531111249', '0', '112405733806388031044823048260633355364385672714761393443836076199572573534761', '22000000000000000', '81610751468817584591557060135061011455598924249751979152864260218787227368076', '74000000000000000', '85958567594438327925289858643513280755808221944303867162719733865088402747542', '22000000000000000', '102663359664285429070342392903129210080748972930533391667197767975401172184595', '74000000000000000'];
    
    const total = m1.concat(m2).concat(m3).concat(m4);
    let randomExperiences = {};
    let experiences = {};

    for (let i = 0; i < total.length; i+=2) {
      //console.log(total[i]);
      //console.log(total[i+1]);

      // all zeros are random mints (loyal mints)
      let random;
      if(total[i+1] === "0" || total[i+1] === "22000000000000000" || total[i+1] === "74000000000000000") {
        const t = await cd.generateTraitsWithCustomRandom(total[i], true);
        const fullAttributes = "{".concat(t).concat("}");
        const JSONAttributes = JSON.parse(fullAttributes);
        const attributes = JSONAttributes.attributes;
        if(attributes[0].value !== "0" ) { // > 0 experiences
          for(let j = 3; j < attributes.length; j+=1) {
            const exp = attributes[j].value;
            if(exp in experiences) {
              experiences[exp] += 1;
            } else {
              experiences[exp] = 1;
            }
          }
        }
      }
    }

    let rareCount = 0;
    for(let i = 0; i<rare.length; i+=1) {
      let amount = 0;
      if(rare[i] in experiences) {
        amount = experiences[rare[i]];
        console.log(rare[i], amount);
        rareCount+=1;
      }
    }
    console.log(rareCount);
    console.log(rare.length);

    let normalCount = 0;
    for(let i = 0; i<normal.length; i+=1) {
      let amount = 0;
      if(normal[i] in experiences) {
        amount = experiences[normal[i]];
        console.log(normal[i], amount);
        normalCount+=1;
      }
    }
    console.log(normalCount);
    console.log(normal.length);
    //console.log(experiences);
    //console.log(Object.keys(experiences).length);

    // calculate default + random
  }
  
  main()
    .then(() => process.exit(0))
    .catch(error => {
      console.error(error);
      process.exit(1);
    });